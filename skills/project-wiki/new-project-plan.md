# 新项目规划工作流

当项目为空（无源代码文件）时，执行这个工作流。通过交互式问答收集需求，逐步完善项目文档。

**核心原则**：
- 根据用户回答动态调整后续问题
- 选项应根据项目类型和上下文智能生成
- 始终允许用户自定义输入

## 步骤 1: 收集原始需求

向用户了解项目的基本信息，需要收集：
- 项目名称
- 项目要解决的问题 / 核心目标
- 目标用户群体

## 步骤 2: 确定项目类型与形态

根据用户描述，确认项目的类型和交付形态，可能的方向包括但不限于：
- 应用类型（Web应用、移动应用、桌面应用、嵌入式等）
- 服务类型（API服务、微服务、后台服务等）
- 工具类型（CLI工具、SDK/库、插件、脚本等）
- 其他类型（数据分析、机器学习模型、游戏、硬件驱动等）

根据项目实际情况生成合适的选项供用户选择。

## 步骤 3: 技术栈选择

根据项目类型，引导用户确定技术选型，可能涉及的方面：

| 问题类型 | 适用场景 | 示例方向 |
|---------|---------|---------|
| 编程语言 | 所有项目 | 根据项目类型推荐合适的语言 |
| 框架/平台 | 需要框架支持时 | 根据语言和项目类型推荐 |
| 数据存储 | 需要持久化时 | 数据库、文件系统、云存储等 |
| 运行环境 | 需要明确时 | 浏览器、Node.js、移动端、嵌入式等 |
| 构建工具 | 需要构建流程时 | 打包、编译、转译工具等 |

**注意**：不是所有项目都需要问所有问题，根据项目类型智能选择需要询问的内容。

## 步骤 4: 核心功能梳理

深入了解项目的核心功能：

1. **功能列表**：请用户列出 3-5 个核心功能/模块
2. **功能细化**：对每个核心功能，根据需要进一步了解：
   - 功能的具体目标和预期效果
   - 主要的使用场景或用户操作
   - 与其他功能/系统的关联
   - 特殊的技术要求或约束

## 步骤 5: 补充需求收集

根据项目类型，可能需要了解的其他方面：

| 需求类型 | 何时询问 | 关注点 |
|---------|---------|--------|
| 用户/权限 | 有用户概念时 | 认证方式、权限模型 |
| 部署/分发 | 需要发布时 | 部署环境、分发渠道 |
| 性能要求 | 有性能敏感场景时 | 并发、响应时间、资源限制 |
| 兼容性 | 多环境运行时 | 平台、版本、浏览器等 |
| 集成需求 | 需要对接外部系统时 | 第三方API、数据源等 |
| 特殊约束 | 有特殊要求时 | 安全合规、离线支持、国际化等 |

**注意**：根据前面收集的信息，智能判断哪些问题需要询问，避免问不相关的问题。

## 步骤 6: 生成项目规划文档

根据收集的信息，生成项目文档。文档结构和内容应根据项目类型灵活调整。

### 6.1 项目概述 (.monkeycode/docs/INDEX.md)

参考 [文档模板](./templates.md#新项目索引模板) 的 docs-new-index

### 6.2 架构设计 (.monkeycode/docs/ARCHITECTURE.md)

根据项目类型，架构文档应包含以下相关部分：

参考 [文档模板](./templates.md#新项目架构模板) 的 docs-new-architecture

### 6.3 接口定义 (.monkeycode/docs/INTERFACES.md)

根据项目类型，接口文档可能包含不同内容：

| 项目类型 | 接口文档内容 |
|---------|-------------|
| API 服务 | HTTP 端点、请求/响应格式、认证方式 |
| SDK/库 | 公开 API、类/函数签名、使用示例 |
| CLI 工具 | 命令列表、参数说明、使用示例 |
| 前端应用 | 组件接口、状态管理、事件系统 |
| 插件 | 扩展点、钩子函数、配置项 |
| 其他 | 根据项目特点定义合适的接口文档 |

### 6.4 开发指南 (.monkeycode/docs/DEVELOPER_GUIDE.md)

参考 [文档模板](./templates.md#新项目开发指南模板) 的 docs-new-devguide

## 步骤 7: 确认与迭代

生成文档后，通过执行 `git commit` 和 `git push` 命令，将文档提交到远程仓库，然后向用户确认：

```
使用 ask_user 工具询问：
"我已根据您的需求生成了项目规划文档，请查看以下内容：
1. .monkeycode/docs/INDEX.md - 项目概述
2. .monkeycode/docs/ARCHITECTURE.md - 架构设计
3. .monkeycode/docs/INTERFACES.md - 接口定义
4. .monkeycode/docs/DEVELOPER_GUIDE.md - 开发指南

您对这些文档满意吗？需要调整哪些部分？"
选项：
  - "需要调整架构设计"
  - "需要补充更多接口"
  - "需要修改技术选型"
  - "其他调整（请说明）"
```

根据用户反馈，迭代完善文档，直到用户满意为止。
