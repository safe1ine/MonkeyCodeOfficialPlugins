# 同步工作流

当文档已存在时，用户可能需要对文档进行调整（如 AI 协助补充内容），也可能是代码结构做了一些调整，需要同步代码与文档以保持一致性。

请在任务启动时，先咨询用户具体需要执行哪个操作，然后遵循用户的指令进行文档更新。

## 步骤 1: 检测现有结构

定位现有文档：
```
{{workspace}}/.monkeycode/docs/
├── ARCHITECTURE.md    (检查)
├── INTERFACES.md      (检查)
├── DEVELOPER_GUIDE.md (检查)
├── INDEX.md           (检查)
├── 模块/                 (检查)
└── 专有概念/             (检查)
```

记录现有约定（位置、命名、风格）。

## 步骤 2: 识别变更

对比代码与文档：

| 检查项 | 方法 |
|--------|------|
| 新模块 | 没有 README 的目录 |
| 新 API | 未文档化的端点/命令 |
| 新概念 | 不在 `专有概念/` 中的模型/类型 |
| 删除项 | 引用已删除代码的文档 |
| 变更项 | 过时的描述或流程 |

## 步骤 3: 增量更新

**优先章节更新而非全部重写**:
- 为新功能添加新章节
- 更新变更的特定段落
- 删除已删除功能的章节
- 保留有价值的手写内容

## 步骤 4: 添加新文档

按需创建新文件：
- 为新领域实体添加概念页面
- 为新目录添加模块 README
- 更新 INDEX.md 添加新链接

## 步骤 5: 验证链接

确保所有交叉引用有效：
- 内部文档链接（相对路径）
- 代码文件引用
- 章节锚点

修复或删除失效链接。

## 步骤 6: 提交更新

在完成文档更新后：
1. 请将 .monkeycode/docs 目录下，**本次会话创建或修改过的所有文档**，执行 `git commit` 和 `git push` 命令，将文件提交到远程仓库
2. 输出本次改动的内容概述，提示用户从 `项目文档` 页面查看 AI 更新的内容。并向用户确认文档内容是否无误，以及是否有需要补充的事项。
